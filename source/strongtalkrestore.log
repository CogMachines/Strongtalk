
"August 18, 2009 -> 20:47:6"!

! (Delta mirrorFor: #Alien) methodsFor: 'private - accessing' !
addressField: anInteger <Integer>

	self signedLongAt: 1 put: anInteger! !

"August 18, 2009 -> 20:48:44"!

! (Delta mirrorFor: #Alien) methodsFor: 'testing' !
isPointer

	^self size == 0! !

"August 18, 2009 -> 20:49:39"!

! (Delta mirrorFor: #Alien) methodsFor: 'deallocation' !
free! !

"August 18, 2009 -> 20:51:20"!

! (Delta mirrorFor: #Alien) methodsFor: 'deallocation' !
free

	{{self primitiveAlienFree}}! !

"August 18, 2009 -> 20:53:1"!

! (Delta mirrorFor: #Alien) methodsFor: 'deallocation' !
free

	{{primitiveAlienFree: self ifFail: [:err| self error: 'Could not free alien']}}! !

"August 18, 2009 -> 20:53:29"!

! (Delta mirrorFor: #Alien) methodsFor: 'deallocation' !
free

	{{primitiveAlienFree: self ifFail: [:err| self error: 'Could not free alien: ', err]}}! !

"August 18, 2009 -> 20:54:1"!

! (Delta mirrorFor: #Alien) methodsFor: 'private - accessing' !
addressField ^<Integer>

	^self signedLongAt: 1! !

"August 18, 2009 -> 20:54:15"!

! (Delta mirrorFor: #Alien) methodsFor: 'deallocation' !
free

	{{primitiveAlienFree: self addressField
		ifFail: [:err| self error: 'Could not free alien: ', err]}}! !

"August 18, 2009 -> 20:56:45"!

! (Delta mirrorFor: #PointerAlienTest) methodsFor: 'testing' !
testFreeingTwiceShouldFail

	pointer free.
	self should: [pointer free] raise: Error! !

"August 18, 2009 -> 20:57:15"!

! (Delta mirrorFor: #Alien) methodsFor: 'deallocation' !
free

	{{primitiveAlienFree: self addressField
		ifFail: [:err| self error: 'Could not free alien: ', err]}}.
	self addressField: 0! !

"August 18, 2009 -> 20:58:17"!

! (Delta mirrorFor: #PointerAlienTest) methodsFor: 'fixture' !
tearDown

	[pointer free]
		on: Error
		do: [:ignore|]! !
